# <p align="center">WCD Project 3 - Containerize Apps </p>

**URL:** [WCD Project 3 (Containerize Apps)](https://github.com/RakinKhan/WCD-Project-3)
<br/>
**Group Members:** Lara, Farius, Juan, Rakin

## Architecture

## Setup Instructions
The following files sets up an AWS cloud infrastructure using Terraform to deploy a web application that has been containerized by Docker. The Terraform file creates a VPC with a public subnet and is connected to an internet gateway for public access. Within the public subnet there is an EC2 instance with a public ip address and runs the shell commands found in the ```setup.sh``` file. The ```setup.sh``` is responsible for 2 things. The first task of the script is to update the package managers and then install Docker on the EC2 instance. The second task is to run container of a Docker image that has its port (port 3000) mapped to the host machines port for http requests (port 80). The docker image used for this project is a simple React template in a user created Dockerhub registry.

The following steps require an access key and secret key credentials from AWS, a public and private ssh key pair, and Terraform installed. Docker or node is not necessary to be installed for the purposes of this project. **NOTE** A ```.pem``` key generated by AWS can be used instead to ssh into your subnet. In order to use the .pem key, place the key in your  ```.ssh folder``` and change the file path in the ```aws_key_pair``` resource found in the main.tf file. Make sure that the key name in the resource block matches the key name on AWS as well.

1. Download the project from Github and in the Terminal, change the path to the directory of the project folder.
2. In the ```access-credentials.tf file``` replace the empty string values of the access key and private key with yours. 
3. In the main.tf file, make sure that the path to your public key in the resource block ```aws_key_pair``` matches the actual location.
4. Run the following code in the terminal, in order:
```
terraform init
# Initializes working directory containing Terraform files.

terraform plan
# Creates and execution plan and preview changes.

terraform apply -auto-approve
# Applies the configuration made in the Terraform files
```

5. Once Terraform has completed running the file, the public ip address of the ec2 instance should be displayed in the terminal thanks to the ```output.tf``` file. using the public you can view the deployed web app by typing in the browser ```http://``` followed by the public ip displayed in the console. You can also ssh into the eC2 instance of the deployed container by typing in the terminal:

```
ssh -i "~/.ssh/[your key name]" ubuntu@[Instance Public IP]
```

6. To check if docker is running type in the linux terminal:

```
sudo systemctl status docker
```

7. To check the container for the webapp image is running:

```
sudo docker ps
```
6. Lastly, to destroy all the resources created from this project, exit out of the EC2 instance if you are in it, and in the project directoy terminal type:
```
terraform destroy -auto-approve
# Destroys all resources created by the Terraform files.
```